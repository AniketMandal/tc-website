machine:
  java:
    version: openjdk7
  services:
    - docker

checkout:
  pre:
    - pwd
    - git clone https://github.com/topcoder-platform/tc-website-glue glue
    - git clone https://github.com/topcoder-platform/tc-website-shared shared
    - git clone https://github.com/topcoder-platform/tc-website-external-artifacts external-artifacts
    - ls -a

compile:
  override:
    - ant -version
    - which ant
    - cp buildconfig/ant-contrib-1.0b3.jar ../glue/libs/
    - ant -f move.xml package-topcoder
    
test:
  override:
    - pwd && ls 
    - cp -Rf .deploy/circleci/* . && docker run -v ${HOME}:/root/tc-platform appiriodevops/tc-website:build
